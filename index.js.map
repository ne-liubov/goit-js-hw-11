{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getImagesByQuery = query => {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '49208970-c1347c58b4866d3d505700044',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  });\n};\n","export const galleryContainer = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconsole.log(loaderEl);\n\nexport const createGallery = images => {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = images;\n  return `\n    <li class=\"img-list-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\"/>\n      </a>\n      <div class=\"info-wrapper\">\n        <div class=\"img-info\">\n          <p class=\"label\">Likes</p>\n          <p class=\"value\">${likes}</p>\n        </div>\n        <div class=\"img-info\">\n          <p class=\"label\">Views</p>\n          <p class=\"value\">${views}</p>\n        </div>\n        <div class=\"img-info\">\n          <p class=\"label\">Comments</p>\n          <p class=\"value\">${comments}</p>\n        </div>\n        <div class=\"img-info\">\n          <p class=\"label\">Downloads</p>\n          <p class=\"value\">${downloads}</p>\n        </div>\n      </div>\n    </li>`;\n};\n\n// Очистка галереи\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\n// Показ лоадера\nexport const showLoader = () => {\n  console.log('Показать лоадер');\n  loaderEl.classList.remove('is-hidden');\n};\n\n// Скрытие лоадера\nexport const hideLoader = () => {\n  console.log('Скрыть лоадер');\n  loaderEl.classList.add('is-hidden');\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  galleryContainer,\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nconst searchFormEl = document.querySelector('form');\nconsole.log(searchFormEl);\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  // ключевое слово, которое ввел пользователь\n  const searchedQuery =\n    event.currentTarget.elements['search-text'].value.trim();\n\n  clearGallery();\n\n  if (searchedQuery === '') {\n    iziToast.show({\n      message: 'Please enter your request!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader(); // показать loader перед запросом\n\n  getImagesByQuery(searchedQuery)\n    .then(response => {\n      hideLoader();\n      \n      const images = response.data.hits;\n\n      if (images.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          theme: 'dark',\n        });\n\n        searchFormEl.reset();\n\n        return;\n      }\n\n      const galleryTemplate = images\n        .map(image => createGallery(image))\n        .join('');\n\n      galleryContainer.innerHTML = galleryTemplate;\n\n      searchFormEl.reset();\n\n      // обновить lightbox после вставки новых элементов\n      new SimpleLightbox('.gallery-link', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    })\n    .catch(error => {\n      hideLoader(); // скрыть loader независимо от результата\n\n      iziToast.error({\n        message: error.message,\n        position: 'topRight',\n      });\n    });\n};\n\nsearchFormEl.addEventListener('submit', onFormSubmit);\n"],"names":["getImagesByQuery","query","axios","galleryContainer","loaderEl","createGallery","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","searchFormEl","onFormSubmit","event","searchedQuery","iziToast","response","galleryTemplate","image","SimpleLightbox","error"],"mappings":"owBAEO,MAAMA,EAAmBC,GACvBC,EAAM,IAAI,2BAA4B,CAC3C,OAAQ,CACN,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACL,CAAG,ECXUE,EAAmB,SAAS,cAAc,UAAU,EAC3DC,EAAW,SAAS,cAAc,SAAS,EACjD,QAAQ,IAAIA,CAAQ,EAEb,MAAMC,EAAgBC,GAAU,CACrC,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,mBAEUC,CAAa;AAAA,gCACAC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6BAK7BC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6BAIRC,CAAS;AAAA;AAAA;AAAA,UAItC,EAGaC,EAAe,IAAM,CAChCX,EAAiB,UAAY,EAC/B,EAGaY,EAAa,IAAM,CAC9B,QAAQ,IAAI,iBAAiB,EAC7BX,EAAS,UAAU,OAAO,WAAW,CACvC,EAGaY,EAAa,IAAM,CAC9B,QAAQ,IAAI,eAAe,EAC3BZ,EAAS,UAAU,IAAI,WAAW,CACpC,EC3CMa,EAAe,SAAS,cAAc,MAAM,EAClD,QAAQ,IAAIA,CAAY,EAExB,MAAMC,EAAeC,GAAS,CAC5BA,EAAM,eAAc,EAGpB,MAAMC,EACJD,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OAIpD,GAFAL,IAEIM,IAAkB,GAAI,CACxBC,EAAS,KAAK,CACZ,QAAS,6BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDN,IAEAf,EAAiBoB,CAAa,EAC3B,KAAKE,GAAY,CAChBN,IAEA,MAAMV,EAASgB,EAAS,KAAK,KAE7B,GAAIhB,EAAO,SAAW,EAAG,CACvBe,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,MAAO,MACjB,CAAS,EAEDJ,EAAa,MAAK,EAElB,MACD,CAED,MAAMM,EAAkBjB,EACrB,IAAIkB,GAASnB,EAAcmB,CAAK,CAAC,EACjC,KAAK,EAAE,EAEVrB,EAAiB,UAAYoB,EAE7BN,EAAa,MAAK,EAGlB,IAAIQ,EAAe,gBAAiB,CAClC,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,CACP,CAAK,EACA,MAAMC,GAAS,CACdV,IAEAK,EAAS,MAAM,CACb,QAASK,EAAM,QACf,SAAU,UAClB,CAAO,CACP,CAAK,CACL,EAEAT,EAAa,iBAAiB,SAAUC,CAAY"}